#!/bin/bash
#******************************************#
#     File Name: gas_drift_mon.sh
#        Author: Takahiro Yamamoto
# Last Modified: 2020/01/30 15:52:23
#******************************************#


if test "$2" = ""
then
    LEN=86400
    OFS=43200
else
    LEN=$2
    let OFS=${LEN}/2
fi

if test "$1" = "bp"
then
    ndscope --window-title "TypeBp GAS Drift" -t "${OFS} seconds ago"  -w ${LEN} \
	    K1:PEM-TEMPERATURE_BOOTH_PR2 K1:PEM-TEMPERATURE_BOOTH_PR3 K1:PEM-TEMPERATURE_BOOTH_PRM \
	    K1:VIS-PR2_SF_COILOUTF_GAS_OUT16 K1:VIS-PR3_SF_COILOUTF_GAS_OUT16 K1:VIS-PRM_SF_COILOUTF_GAS_OUT16 \
	    K1:VIS-PR2_BF_COILOUTF_GAS_OUT16 K1:VIS-PR3_BF_COILOUTF_GAS_OUT16 K1:VIS-PRM_BF_COILOUTF_GAS_OUT16 \
	    > /dev/null 2>&1 &
elif test "$1" = "b"
then
    ndscope --window-title "TypeB GAS Drift" -t "${OFS} seconds ago"  -w ${LEN} \
	    K1:PEM-TEMPERATURE_BOOTH_BS K1:PEM-TEMPERATURE_BOOTH_SR2 K1:PEM-TEMPERATURE_BOOTH_SR3 K1:PEM-TEMPERATURE_BOOTH_SRM \
	    K1:VIS-BS_F0_COILOUTF_GAS_OUT16 K1:VIS-SR2_F0_COILOUTF_GAS_OUT16 K1:VIS-SR3_F0_COILOUTF_GAS_OUT16 K1:VIS-SRM_F0_COILOUTF_GAS_OUT16 \
	    K1:VIS-BS_F1_COILOUTF_GAS_OUT16 K1:VIS-SR2_F1_COILOUTF_GAS_OUT16 K1:VIS-SR3_F1_COILOUTF_GAS_OUT16 K1:VIS-SRM_F1_COILOUTF_GAS_OUT16 \
	    K1:VIS-BS_BF_COILOUTF_GAS_OUT16 K1:VIS-SR2_BF_COILOUTF_GAS_OUT16 K1:VIS-SR3_BF_COILOUTF_GAS_OUT16 K1:VIS-SRM_BF_COILOUTF_GAS_OUT16 \
	    > /dev/null 2>&1 &
elif test "$1" = "a"
then
    ndscope --window-title "TypeA GAS Drift" -t "${OFS} seconds ago"  -w ${LEN} --table \
	    K1:PEM-TEMPERATURE_BOOTH_IXC . K1:PEM-TEMPERATURE_BOOTH_IYC . K1:PEM-TEMPERATURE_BOOTH_EXC1F . K1:PEM-TEMPERATURE_BOOTH_EYC1F , \
	    K1:VIS-ITMX_F0_COILOUTF_GAS_OUT16 . K1:VIS-ITMY_F0_COILOUTF_GAS_OUT16 . K1:VIS-ETMX_F0_COILOUTF_GAS_OUT16 . K1:VIS-ETMY_F0_COILOUTF_GAS_OUT16 , \
	    K1:VIS-ITMX_F1_COILOUTF_GAS_OUT16 . K1:VIS-ITMY_F1_COILOUTF_GAS_OUT16 . K1:VIS-ETMX_F1_COILOUTF_GAS_OUT16 . K1:VIS-ETMY_F1_COILOUTF_GAS_OUT16 , \
	    K1:VIS-ITMX_F2_COILOUTF_GAS_OUT16 . K1:VIS-ITMY_F2_COILOUTF_GAS_OUT16 . K1:VIS-ETMX_F2_COILOUTF_GAS_OUT16 . K1:VIS-ETMY_F2_COILOUTF_GAS_OUT16 , \
	    K1:VIS-ITMX_F3_COILOUTF_GAS_OUT16 . K1:VIS-ITMY_F3_COILOUTF_GAS_OUT16 . K1:VIS-ETMX_F3_COILOUTF_GAS_OUT16 . K1:VIS-ETMY_F3_COILOUTF_GAS_OUT16 , \
	    K1:VIS-ITMX_BF_COILOUTF_GAS_OUT16 . K1:VIS-ITMY_BF_COILOUTF_GAS_OUT16 . K1:VIS-ETMX_BF_COILOUTF_GAS_OUT16 . K1:VIS-ETMY_BF_COILOUTF_GAS_OUT16 \
	    > /dev/null 2>&1 &
else
    cat <<EOF >&2
Usage: $0 type [duration]

  Arguments:
     type: bp, b, or a

     duration: data duration in seconds

EOF
fi
